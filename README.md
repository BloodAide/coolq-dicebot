DiceRobot kills you 3000
====
Just a simple dicebot for coolq in development.<br> 
只是一个简单的酷Q骰子机器人。<br> 
点击[下载cpk](https://github.com/decterous/CoolQDicebot/releases/latest)前往下载本骰子机器人最新cpk<br> 
点击[获取酷Q](https://cqp.cc/)前往酷Q官网下载酷Q<br>
在启动酷Q后，右键点击酷Q任务栏图标，点击<code>应用</code>→<code>应用目录</code>，将cpk复制到打开的目录中，重启酷Q。<br>
注意：该骰子机器人不会回应私聊消息。<br>

特性
====
所有的骰子指令支持多行输入。<br> 
使用硬件随机器，如果硬件随机器不可用，则改用mt19937随机器。<br> 
骰子指令的头部.r可以任意填充空格，例如<code>      .    r     1d20</code>也是有效的。<br> 
昵称保存在数据库中，每个QQ号在每个群/讨论组中都有独立的昵称。<br> 
能够识别指令断点，例如输入<code> .r 1d20 ++++</code>，机器人会将<code>++++</code>识别为骰子备注信息，并依此正常输出结果。<br>
<br>
直接输入的数值可以使用整数、小数、百分数，例如<code>123</code>，<code>123.45</code>,<code>123.45%</code>都是有效的。<br> 
其实算式也可以在各个组成部分之间插入空格，例如<code>.r 1d20  +  4d6  +3</code>也可以。<br> 
但是数字和骰子指令中是禁止空格的，例如<code>4d6</code>是不能写作<code>4 d 6</code>的，<code>100%</code>不能写作<code>1 0 0%</code>，这里被空格隔开的部分会被识别成指令中断，作为备注信息输出。<br> 
没有任何计算时是不会输出的，例如<code>.r</code>，<code>.r  </code>，<code>.r () </code>都不会有输出结果，无论是否有备注信息。<br> 

使用示范
====

最简单的骰子
------

这里假设我们骰一个d20来攻击那个哥布林。<br> 
>输入：<code>.rd20</code><br> 
>输出：<code> * 测试  掷骰: d20 = 20</code><br> 

你只需要在开头写上<code>.r</code>再加上骰子（例如<code>d20</code>、<code>4d6</code>）。<br> 
发送这个消息，骰子机器人就能识别你的消息并回复一个骰子结果。<br> 
你也可以加上一些描述：<br> 
>输入：<code>.rd20攻击</code><br> 
>输出：<code> * 测试 攻击 掷骰: d20 = 6</code><br> 

骰子机器人在说什么？
------

骰子机器人发送的信息组成结构如下：<br> 
<pre><code> * [你的QQ昵称/群名片] [骰子描述] 掷骰: [骰子指令] = [结果]</code></pre>
群名片就是你使用骰子所在的群中你的群名片，如果是讨论组则使用昵称。<br>
骰子描述即你输入的骰子（例如<code>d20</code>、<code>4d6</code>）。<br>
结果即最终计算得到的数值。<br>

我想知道4d6的每个d6各是多少
------

有的时候你可能会想要知道4d6里面每个骰子各是多少，这个时候使用<code>.rs</code>代替之前的<code>.r</code>即可。<br>
>输入：<code>.rs4d6</code><br> 
>输出：<code> * 测试  掷骰: 4d6 = (1 + 1 + 4 + 2) = 8</code><br> 

这个时候的发送的信息组成结构为：<br> 
<pre><code> * [你的QQ昵称/群名片] [骰子描述] 掷骰: [骰子指令] = [骰子详细] = [结果]</code></pre>

我想双/三/四骰取高/低
------

你可以在骰子指令后加上<code>k[数值]</code>或者<code>kl[数值]</code>来只取部分结果。<br>
<code>k[数值]</code>表示保留较高结果，<code>kl[数值]</code>表示较低结果。<br>
下面的例子是骰4d6并保留3个较高的结果（即扔掉较低的那个）。<br>
>输入：<code>.rs4d6k3</code><br> 
>输出：<code> * 测试  掷骰: 4d6k3 = (5 + 1 + (1) + 1) = 7</code><br> 

一个一个地输入太麻烦了！
------

骰子机器人支持一次输入多行，如下所示：<br>
>输入<br>
<pre><code>.r 1d20 +    1d6-3+4+11 破邪斩+猛力攻击
.r 5d4 * 150%
.r 5d4*(2d2+3+4)/3 + 200%
.r 5d4*(2d2+3*(1d6+1))+4/3</code></pre>
>输出<br>
<pre><code> * 测试 破邪斩+猛力攻击 掷骰: 1d20 + 1d6 - 3 + 4 + 11 = 23
 * 测试  掷骰: 5d4 * 150% = 18
 * 测试  掷骰:  + 200% = 2
 * 测试  掷骰: 5d4 * (2d2 + 3 * (1d6 + 1)) + 4 / 3 = 253.333</code></pre>
<br>
可能下面的场景你会经常遇到：<br>

>输入<br>
<pre><code>.r4d6k3 力量
.r4d6k3 敏捷
.r4d6k3 体质
.r4d6k3 智力
.r4d6k3 感知
.r4d6k3 魅力</code></pre>
>输出<br>
<pre><code> * 测试 力量 掷骰: 4d6k3 = 10
 * 测试 敏捷 掷骰: 4d6k3 = 15
 * 测试 体质 掷骰: 4d6k3 = 14
 * 测试 智力 掷骰: 4d6k3 = 12
 * 测试 感知 掷骰: 4d6k3 = 9
 * 测试 魅力 掷骰: 4d6k3 = 13</code></pre>
<br>

输出的顺序完全按照你的输入顺序，并且如果存在不符合规范的行，能够单独忽略。<br>
>输入<br>
<pre><code>.r4d6k3 力量
这行是来捣乱的
.r4d6k3 敏捷</code></pre>
>输出<br>
<pre><code> * 测试 力量 掷骰: 4d6k3 = 11
 * 测试 敏捷 掷骰: 4d6k3 = 12</code></pre>
 
我想能直接计算一部分后续加值
------

不用担心，骰子机器人是支持算式的。<br>
>输入：<code>.rs(((4d6+3)/2+2d20)+4*1d6)*150%</code><br> 
>输出：<code> * 测试  掷骰: (( + 2d20) + 4 * 1d6) * 150% = (( + (12 + 13)) + 4 * (3)) * 150% = 55.5</code><br> 

当然，如果你的算式输入格式有问题，多余的部分会被识别成骰子描述。<br> 
>输入：<code>.rs4d6+(((4d6+3)/2+2d20)+4*1d6</code><br> 
>输出：<code> * 测试 +(((4d6+3)/2+2d20)+4*1d6 掷骰: 4d6 = (6 + 3 + 2 + 4) = 15</code><br> 

我不想每次都改群名片
------

使用<code>.n</code>指令来指定一个仅在骰子机器人中用的名字。<br>
>输入：<code>.n菜鸟PC</code><br> 
>输出：<code> * Da'Inihlus 的新名字是 菜鸟PC</code><br> 

在这之后使用骰子指令时，昵称部分会使用这个名字。<br>
>输入：<code>.r4d6k3 力量</code><br> 
>输出：<code> * 菜鸟PC 力量 掷骰: 4d6k3 = 7</code><br> 

这个昵称在每个群/讨论组之间是独立的，在A群的设置不会影响在B群的状态。<br>

除此之外，你也可以使用<code>.ns</code>来更改昵称，这个时候骰子机器人不会回复消息。
>输入<br>
<pre><code>.ns 迷诱魔
.r 1d20+20
.ns 反pal魅魔
.r 1d20+24破善斩</code></pre>
>输出<br>
<pre><code> * 迷诱魔  掷骰: 1d20 + 20 = 37
 * 反pal魅魔 破善斩 掷骰: 1d20 + 24 = 41</code></pre>

我是一个coc7版玩家
------

骰子机器人提供了coc定制的骰子。使用指令为<code>.c</code>。<br> 
>输入：<code>.c图书馆利用</code><br> 
>输出：<code> * 反pal魅魔 图书馆利用 掷骰: d100 = 11</code><br> 

除此之外，内置了coc7版的奖惩骰。使用<code>b[数值]</code>来产生奖励骰，使用<code>p[数值]</code>来产生惩罚骰。<br>
>输入：<code>.cp2闪避(50)</code><br> 
>输出：<code> * 反pal魅魔 闪避(50) 掷骰: d100p2 = [(1) + 7 + (7)] [0] = 70</code><br> 

>输入：<code>.cb2斗殴(65)</code><br> 
>输出：<code> * 反pal魅魔 斗殴(65) 掷骰: d100b2 = [(10) + 9 + (9)] [0] = 90</code><br> 

可以自动计算奖惩相抵。<br>
>输入：<code>.cp5b5p2b3奖罚抵消</code><br> 
>输出：<code> * 反pal魅魔 奖罚抵消 掷骰: d100p5b5p2b3 = d100b1 = [0 + (1)] [7] = 7</code><br> 

高级功能
------
手动骰子(.h/.hr/.hk/.hka)<br> 
>输入<br>
<pre><code>.ns手动骰子测试
.h4d6+2d8找几个骰子
.hr4重骰第四个
.hk5杀掉第五个
.ha2d6增加两个
.hka全杀掉
.hr4
.ha1d4</code></pre>
>输出<br>
<pre><code> * 手动骰子测试 找几个骰子 在桌上放了这些骰子: 4d6+2d8 当前状态: 3(6) + 6(6) + 4(6) + 4(6) + 5(8) + 4(8) = 26
 * 手动骰子测试 重骰第四个 重骰桌上的第 4 个骰子 当前状态: 3(6) + 6(6) + 4(6) + 1(6) + 5(8) + 4(8) = 23
 * 手动骰子测试 杀掉第五个 杀死桌上的第 5 个骰子 当前状态: 3(6) + 6(6) + 4(6) + 1(6) + 4(8) = 18
 * 手动骰子测试 增加两个 在桌上增加了这些骰子: 2d6 当前状态: 3(6) + 6(6) + 4(6) + 1(6) + 4(8) + 2(6) + 2(6) = 22
 * 手动骰子测试 全杀掉 杀掉了所有的骰子 当前状态: 没有骰子了
 * 手动骰子测试  重骰桌上的第 4 个骰子 当前状态: 没有骰子了
 * 手动骰子测试  在桌上增加了这些骰子: 1d4 当前状态: 2(4) = 2</code></pre>
